var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function a(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function s(e,t){e.appendChild(t)}function o(e,t,n){e.insertBefore(t,n||null)}function l(e){e.parentNode.removeChild(e)}function c(e){return document.createElement(e)}function d(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function u(e){return document.createTextNode(e)}function f(){return u(" ")}function p(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function h(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function m(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function v(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}let g;function b(e){g=e}function x(e){(function(){if(!g)throw new Error("Function called outside component initialization");return g})().$$.on_mount.push(e)}const y=[],w=[],_=[],C=[],$=Promise.resolve();let M=!1;function T(e){_.push(e)}let j=!1;const P=new Set;function L(){if(!j){j=!0;do{for(let e=0;e<y.length;e+=1){const t=y[e];b(t),k(t.$$)}for(b(null),y.length=0;w.length;)w.pop()();for(let e=0;e<_.length;e+=1){const t=_[e];P.has(t)||(P.add(t),t())}_.length=0}while(y.length);for(;C.length;)C.pop()();M=!1,j=!1,P.clear()}}function k(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(T)}}const R=new Set;let E;function z(){E={r:0,c:[],p:E}}function q(){E.r||r(E.c),E=E.p}function A(e,t){e&&e.i&&(R.delete(e),e.i(t))}function N(e,t,n,r){if(e&&e.o){if(R.has(e))return;R.add(e),E.c.push((()=>{R.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}function F(e){e&&e.c()}function S(e,n,i){const{fragment:s,on_mount:o,on_destroy:l,after_update:c}=e.$$;s&&s.m(n,i),T((()=>{const n=o.map(t).filter(a);l?l.push(...n):r(n),e.$$.on_mount=[]})),c.forEach(T)}function B(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function H(e,t){-1===e.$$.dirty[0]&&(y.push(e),M||(M=!0,$.then(L)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function I(t,a,i,s,o,c,d=[-1]){const u=g;b(t);const f=a.props||{},p=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:o,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:n(),dirty:d,skip_bound:!1};let h=!1;if(p.ctx=i?i(t,f,((e,n,...r)=>{const a=r.length?r[0]:n;return p.ctx&&o(p.ctx[e],p.ctx[e]=a)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](a),h&&H(t,e)),n})):[],p.update(),h=!0,r(p.before_update),p.fragment=!!s&&s(p.ctx),a.target){if(a.hydrate){const e=function(e){return Array.from(e.childNodes)}(a.target);p.fragment&&p.fragment.l(e),e.forEach(l)}else p.fragment&&p.fragment.c();a.intro&&A(t.$$.fragment),S(t,a.target,a.anchor),L()}b(u)}class D{$destroy(){B(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function J(t){let n,a,i,d,g,b,x,y,w,_,C,$,M,T,j,P,L,k,R,E,z,q,A,N,F,S,B,H,I,D,J=t[1][t[0]]+"",O=t[1][t[0]]+9+"";return{c(){n=c("div"),n.innerHTML="<h2>Evolution des températures historiques par métropoles françaises (bandes)</h2> \n    <h3>Pré-raitements:</h3> \n    <p>Dans cette visualisation nous avons récupérer les données des grandes métropoles françaises séparemment (Lyon, Paris, Marseille, Bordeaux) que nous avons prétraité pour faire une union. Nous avons réalisé ce prétraitement en python</p> \n    <p>Lorsqu&#39;une donnée de température est absente, on l&#39;ignore dans le calcul de la moyenne.</p>",a=f(),i=c("div"),d=c("div"),g=c("p"),g.textContent="Selectionnez une ville:",b=f(),x=c("select"),y=c("option"),y.textContent="Lyon",w=c("option"),w.textContent="Paris",_=c("option"),_.textContent="Toulouse",C=c("option"),C.textContent="Marseille",$=c("option"),$.textContent="Bordeaux",M=f(),T=c("div"),j=c("input"),P=f(),L=c("h2"),k=u(J),R=u("-"),E=u(O),z=f(),q=c("div"),A=f(),N=c("div"),N.innerHTML='Référence: <a href="https://www.researchgate.net/publication/4187821_Two-Tone_Pseudo_Coloring_Compact_Visualization_for_One-Dimensional_Data">Two-Tone Pseudo Coloring</a> \n    <br/>\n    Source des données: <a href="https://www.meteo-paris.com/">Météo Paris</a>',F=f(),S=c("a"),S.textContent="Precedent",B=f(),H=c("a"),H.textContent="Suivant",h(n,"class","center-div svelte-18h556o"),y.__value="69",y.value=y.__value,w.__value="75",w.value=w.__value,_.__value="31",_.value=_.__value,C.__value="13",C.value=C.__value,$.__value="33",$.value=$.__value,h(x,"name","pets"),h(x,"id","pet-select"),h(d,"class","col-4"),h(j,"class","slider"),h(j,"id","slider"),h(j,"type","range"),h(j,"min","0"),h(j,"max","7"),j.value=t[0],h(j,"step","1"),h(L,"class","date"),h(L,"id","date"),h(T,"class","col-4"),h(i,"id","cont"),h(i,"class","row svelte-18h556o"),h(q,"id","visu1"),h(q,"class","center-div svelte-18h556o"),v(N,"margin","2%"),h(S,"href","#/"),h(S,"class","btn btn-primary btn-lg active"),h(S,"role","button"),h(S,"aria-pressed","true"),h(H,"href","#Metropoles"),h(H,"class","btn btn-primary btn-lg active"),h(H,"role","button"),h(H,"aria-pressed","true")},m(e,r){o(e,n,r),o(e,a,r),o(e,i,r),s(i,d),s(d,g),s(d,b),s(d,x),s(x,y),s(x,w),s(x,_),s(x,C),s(x,$),s(i,M),s(i,T),s(T,j),s(T,P),s(T,L),s(L,k),s(L,R),s(L,E),o(e,z,r),o(e,q,r),o(e,A,r),o(e,N,r),o(e,F,r),o(e,S,r),o(e,B,r),o(e,H,r),I||(D=[p(x,"input",t[2]),p(j,"input",t[3])],I=!0)},p(e,[t]){1&t&&(j.value=e[0]),1&t&&J!==(J=e[1][e[0]]+"")&&m(k,J),1&t&&O!==(O=e[1][e[0]]+9+"")&&m(E,O)},i:e,o:e,d(e){e&&l(n),e&&l(a),e&&l(i),e&&l(z),e&&l(q),e&&l(A),e&&l(N),e&&l(F),e&&l(S),e&&l(B),e&&l(H),I=!1,r(D)}}}let O=40;function Q(e,t,n){var r,a,i=d3.json("/data/data_temp.json");let s=6,o=69,l=-20;var c=["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"].reverse(),d=d3.scaleQuantize().domain([l,O]).range(c.slice(1));function u(e,t,n,r,a,i,s){var o=e.filter((function(e){return e.annee==t&&e.IdVille==n}));for(let e=0;e<o.length;e++)f(.1*parseInt(o[e][a]),s+1.2*e,i,1.2,30,r)}function f(e,t,n,a,i,s){var o=60/(c.length-1),u=d(e),f=c[c.indexOf(u)-1],p=Math.abs(e-function(e,t,n,r){for(var a=(n-t)/r,i=t;i<=e;)i+=a;return i-a}(e,l,O,c.length-1))*i/o;return null===e||e<-800?s.append("rect").attr("x",t).attr("y",n).attr("class","R").attr("width",a).attr("height",i).attr("fill","#ccc").on("mousemove",(function(e){r.style("visibility","visible").style("position","absolute").style("left",e.x+5+"px").style("top",e.y-25+"px").html("Valeur manquante")})).on("mouseout",(function(){r.style("visibility","hidden")})):(s.append("rect").attr("x",t).attr("y",n+i-p).attr("width",a).attr("class","R").attr("height",p).attr("fill",u).on("mousemove",(function(t){r.style("visibility","visible").style("position","absolute").style("left",t.x+5+"px").style("top",t.y-25+"px").html(Math.round(100*e)/100+" °C")})).on("mouseout",(function(){r.style("visibility","hidden")})),s.append("rect").attr("x",t).attr("y",n).attr("class","R").attr("width",a).attr("height",i-p).attr("fill",f).on("mousemove",(function(t){r.style("visibility","visible").style("position","absolute").style("left",t.x+5+"px").style("top",t.y-25+"px").html(Math.round(100*e)/100+" °C")})).on("mouseout",(function(){r.style("visibility","hidden")}))),[u,f,p]}function p(e){a.selectAll(".R").remove(),a.selectAll("text").remove();var t=1,n={0:1930,1:1940,2:1950,3:1960,4:1970,5:1980,6:1990,7:2e3};console.log(parseInt(s));for(let e=n[parseInt(s)];e<=n[parseInt(s)]+9;e++)i.then((n=>{let r=o,i=20*t*2;t++,u(n,e,r,a,"Tmin",i+10,50),a.append("text").attr("x",0).attr("y",i+22).attr("font-size",20).attr("dy",".35em").text(e),u(n,e,r,a,"Tmax",i+10,530)}));!function(){var e=10;e=20;for(let t=l;t<O;)f(t,4*e+4*t,470,4,20,a),t+=.1;for(let t=l;t<=O;t+=60/(c.length-1))a.append("text").attr("x",4*e+4*t).attr("y",500).attr("font-size",10).attr("dy",".35em").text(t);a.append("text").attr("x",0).attr("y",460).attr("font-size",10).attr("dy",".35em").text("Température en °C"),a.append("text").attr("x",50).attr("y",e).attr("font-size",10).attr("dy",".35em").text("Température minimale par jour"),a.append("text").attr("x",530).attr("y",e).attr("font-size",10).attr("dy",".35em").text("Température maximale par jour")}()}return x((()=>{r=d3.select("#visu1").append("div"),a=d3.select("#visu1").append("svg").attr("id","map").attr("width",1200).attr("height",530),p()})),[s,{0:1930,1:1940,2:1950,3:1960,4:1970,5:1980,6:1990,7:2e3},function(e){o=e.target.value,p()},e=>{n(0,s=e.target.value),p()}]}class V extends D{constructor(e){super(),I(this,e,Q,J,i,{})}}function X(t){let n,r,a,i,d,g,b,x,y,w,_,C,$,M,T,j,P,L,k,R,E,z,q,A,N,F,S,B,H,I,D,J,O,Q,V,X,K,U,Z,G,W,Y,ee,te,ne=t[1][parseInt(t[0])-1]+"";return{c(){n=c("div"),n.innerHTML="<h2>Evolution des températures historiques par métropoles françaises (cartes)</h2> \n        <h3>Pré-raitements:</h3> \n        <p>Dans cette visualisation nous avons récupérer les données des grandes métropoles françaises séparemment (Lyon, Paris, Marseille, Bordeaux) que nous avons prétraité pour faire une union. Nous avons réalisé ce prétraitement en python</p> \n        <p>Lorsqu&#39;une donnée de température est absente, on l&#39;ignore dans le calcul de la moyenne.</p>",r=f(),a=c("div"),i=c("input"),d=f(),g=c("p"),b=u("Mois : "),x=u(ne),y=f(),w=c("div"),w.innerHTML="<p>Lyon</p>",_=f(),C=c("hr"),$=f(),M=c("div"),M.innerHTML="<p>Paris</p>",T=f(),j=c("hr"),P=f(),L=c("div"),L.innerHTML="<p>Marseille</p>",k=f(),R=c("hr"),E=f(),z=c("div"),z.innerHTML="<p>Bordeaux</p>",q=f(),A=c("hr"),N=f(),F=c("div"),F.innerHTML='<svg width="264" height="24" class="svelte-12dxtd2"><rect fill="#053061" width="24" height="24" x="0"></rect><rect fill="#2166ac" width="24" height="24" x="24"></rect><text font-weight="bold" y="20" x="4" fill="white">-20°C</text><rect fill="#4393c3" width="24" height="24" x="48"></rect><rect fill="#92c5de" width="24" height="24" x="72"></rect><rect fill="#d1e5f0" width="24" height="24" x="96"></rect><rect fill="#f7f7f7" width="24" height="24" x="120"></rect><rect fill="#fddbc7" width="24" height="24" x="144"></rect><rect fill="#f4a582" width="24" height="24" x="168"></rect><rect fill="#d6604d" width="24" height="24" x="192"></rect><rect fill="#b2182b" width="24" height="24" x="216"></rect><rect fill="#67001f" width="24" height="24" x="240"></rect><text font-weight="bold" y="20" x="218" fill="white">+40°C</text></svg>',S=f(),B=c("br"),H=f(),I=c("div"),I.innerHTML='Source des données: <a href="https://www.meteo-paris.com/">Météo Paris</a>',D=f(),J=c("a"),J.textContent="Precedent",O=f(),Q=c("a"),Q.textContent="Suivant",V=f(),X=c("br"),K=f(),U=c("br"),Z=f(),G=c("br"),W=f(),Y=c("br"),h(n,"class","center-div svelte-12dxtd2"),h(i,"class","slider"),h(i,"id","slider2"),h(i,"type","range"),h(i,"min","1"),h(i,"max","12"),h(i,"step","1"),h(a,"id","visu"),h(w,"id","l69"),h(M,"id","p75"),h(L,"id","m13"),h(z,"id","b33"),h(F,"class","footer svelte-12dxtd2"),v(I,"margin","2%"),h(J,"href","#Bande"),h(J,"class","btn btn-primary btn-lg active"),h(J,"role","button"),h(J,"aria-pressed","true"),h(Q,"href","#France"),h(Q,"class","btn btn-primary btn-lg active"),h(Q,"role","button"),h(Q,"aria-pressed","true")},m(e,l){o(e,n,l),o(e,r,l),o(e,a,l),s(a,i),s(a,d),s(a,g),s(g,b),s(g,x),o(e,y,l),o(e,w,l),o(e,_,l),o(e,C,l),o(e,$,l),o(e,M,l),o(e,T,l),o(e,j,l),o(e,P,l),o(e,L,l),o(e,k,l),o(e,R,l),o(e,E,l),o(e,z,l),o(e,q,l),o(e,A,l),o(e,N,l),o(e,F,l),o(e,S,l),o(e,B,l),o(e,H,l),o(e,I,l),o(e,D,l),o(e,J,l),o(e,O,l),o(e,Q,l),o(e,V,l),o(e,X,l),o(e,K,l),o(e,U,l),o(e,Z,l),o(e,G,l),o(e,W,l),o(e,Y,l),ee||(te=p(i,"input",t[2]),ee=!0)},p(e,[t]){1&t&&ne!==(ne=e[1][parseInt(e[0])-1]+"")&&m(x,ne)},i:e,o:e,d(e){e&&l(n),e&&l(r),e&&l(a),e&&l(y),e&&l(w),e&&l(_),e&&l(C),e&&l($),e&&l(M),e&&l(T),e&&l(j),e&&l(P),e&&l(L),e&&l(k),e&&l(R),e&&l(E),e&&l(z),e&&l(q),e&&l(A),e&&l(N),e&&l(F),e&&l(S),e&&l(B),e&&l(H),e&&l(I),e&&l(D),e&&l(J),e&&l(O),e&&l(Q),e&&l(V),e&&l(X),e&&l(K),e&&l(U),e&&l(Z),e&&l(G),e&&l(W),e&&l(Y),ee=!1,te()}}}function K(e,t,n){var r,a,i,s=d3.json("/data/lyon_geojson.json"),o=d3.json("/data/paris_geojson.json"),l=d3.json("/data/bordeaux_geojson.json"),c=d3.json("/data/toulouse_geojson.json"),d=d3.json("/data/marseille_geojson.json"),u=d3.json("/data/data_temp.json");const f=(e,t,n,r,s)=>{var o,l=d3.scaleQuantize();"75"===n?o=d3.geoConicConformal().center([2.3488,48.8534]).scale(3e4).translate([a/2,i/2]):"69"===n?o=d3.geoConicConformal().center([4.85,45.75]).scale(5e4).translate([a/2,i/2]):"31"===n?o=d3.geoConicConformal().center([1.4437,43.6043]).scale(15e3).translate([a/2,i/2]):"13"===n?o=d3.geoConicConformal().center([5.4,43.3]).scale(2e4).translate([a/2,i/2]):"33"===n&&(o=d3.geoConicConformal().center([-.57918,44.837789]).scale(16e3).translate([a/2,i/2]));var c=d3.geoPath().projection(o);const d=t.selectAll("path").data(e.features);l.domain([50,r.max]).range(["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"].reverse()),d.enter().append("path").attr("d",c).style("fill",(function(e){return l(e.properties.Tmax)})).attr("stroke","black").attr("stroke-width","0.2px"),d.style("fill",(function(e){return l(e.properties.Tmax)})).attr("stroke","black").attr("stroke-width","0.2px"),t.append("text").attr("x",0).attr("y",i).text((()=>s-10+"-"+s))};let p;var h=[1930,1940,1950,1960,1970,1980,1990,2e3,2008],m=["#l69","#p75","#m13","#b33"];const v=e=>{n(0,p=e.target.value),parseInt(p)<10&&n(0,p="0"+p);var t=0;m.forEach((e=>{r[e].forEach((n=>{var r,a,i,m;r=h[t],a=p,i=e.substring(2),m=n,u.then((e=>{var t,n,u,p,h,v=e.filter((e=>e.annee>r-10&&e.annee<=r&&e.mois===a&&e.IdVille==i)),g=(t=0,n=0,u=0,p=0,v.forEach((e=>{"9.0"!=e.QTmax&&(t+=e.Tmax,p+=1),"9"!=e.QTmin&&(n+=e.Tmin,u+=1)})),{meanMin:n/p,meanMax:t/u});"75"==i?h=o:"69"==i?h=s:"13"==i?h=d:"31"==i?h=c:"33"==i&&(h=l);var b,x,y=(b=-1e5,x=1e6,v.forEach((e=>{"9.0"!=e.QTmax&&(b<e.Tmax&&(b=e.Tmax),x>e.Tmax&&(x=e.Tmax))})),{min:x,max:b});return h.then((e=>{for(var t=0;t<e.features.length;t++)e.features[t].properties.Tmin=g.meanMin,e.features[t].properties.Tmax=g.meanMax;return f(e,m,i,y,r),e}))})),t++})),t=0}))};return x((()=>{a=80,i=120,r=[],(e=>{e.forEach((e=>{r[e]=[];for(let t=0;t<h.length;t++){let t=d3.select(e).append("svg").attr("id","map").attr("width",a).attr("height",i).style("margin-left","30px");r[e].push(t)}}))})(m),v({target:{value:"12"}})})),[p,["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],v]}class U extends D{constructor(e){super(),I(this,e,K,X,i,{})}}function Z(t){let n,r,a,i,g,b,x,y,w,_,C,$,M,T,j,P,L,k,R,E,z,q,A,N,F,S,B,H,I,D,J,O,Q,V,X,K,U=t[1][parseInt(t[0])-1]+"";return{c(){n=c("h1"),n.textContent="Projections sur les anomalies de températures en France selon différents scénarios",r=f(),a=c("div"),a.innerHTML='<div id="RCP26" class="svelte-aq4omu"></div> \n    <div id="RCP45" class="svelte-aq4omu"></div> \n    <div id="RCP85" class="svelte-aq4omu"></div>',i=f(),g=c("br"),b=c("br"),x=f(),y=d("svg"),w=d("rect"),_=d("text"),C=u("0 °C"),$=d("rect"),M=d("rect"),T=d("rect"),j=d("rect"),P=d("rect"),L=d("rect"),k=d("rect"),R=d("text"),E=u("+6 °C"),z=f(),q=c("br"),A=f(),N=c("input"),F=f(),S=c("p"),B=u("Mois : "),H=u(U),I=f(),D=c("div"),D.innerHTML='Source des données: <a href="https://www.data.gouv.fr/fr/organizations/meteo-france/">Météo France - data.gouv.fr</a>',J=f(),O=c("a"),O.textContent="Precedent",Q=f(),V=c("a"),V.textContent="Suivant",h(a,"class","box svelte-aq4omu"),h(w,"fill","rgb(255,255,204)"),h(w,"width","24"),h(w,"height","24"),h(w,"x","0"),h(_,"font-weight","bold"),h(_,"y","20"),h(_,"x","4"),h($,"fill","rgb(255,237,160)"),h($,"width","24"),h($,"height","24"),h($,"x","24"),h(M,"fill","rgb(254,217,118)"),h(M,"width","24"),h(M,"height","24"),h(M,"x","48"),h(T,"fill","rgb(254,178,76)"),h(T,"width","24"),h(T,"height","24"),h(T,"x","72"),h(j,"fill","rgb(253,141,60)"),h(j,"width","24"),h(j,"height","24"),h(j,"x","96"),h(P,"fill","rgb(252,78,42)"),h(P,"width","24"),h(P,"height","24"),h(P,"x","120"),h(L,"fill","rgb(227,26,28)"),h(L,"width","24"),h(L,"height","24"),h(L,"x","144"),h(k,"fill","rgb(177,0,38)"),h(k,"width","24"),h(k,"height","24"),h(k,"x","168"),h(R,"font-weight","bold"),h(R,"y","20"),h(R,"x","158"),h(R,"fill","white"),h(y,"width","192"),h(y,"height","24"),h(N,"class","slider"),h(N,"id","slider2"),h(N,"type","range"),h(N,"min","1"),h(N,"max","12"),h(N,"step","1"),v(D,"margin","2%"),h(O,"href","#Metropoles"),h(O,"class","btn btn-primary btn-lg active"),h(O,"role","button"),h(O,"aria-pressed","true"),h(V,"href","#Cercles"),h(V,"class","btn btn-primary btn-lg active"),h(V,"role","button"),h(V,"aria-pressed","true")},m(e,l){o(e,n,l),o(e,r,l),o(e,a,l),o(e,i,l),o(e,g,l),o(e,b,l),o(e,x,l),o(e,y,l),s(y,w),s(y,_),s(_,C),s(y,$),s(y,M),s(y,T),s(y,j),s(y,P),s(y,L),s(y,k),s(y,R),s(R,E),o(e,z,l),o(e,q,l),o(e,A,l),o(e,N,l),o(e,F,l),o(e,S,l),s(S,B),s(S,H),o(e,I,l),o(e,D,l),o(e,J,l),o(e,O,l),o(e,Q,l),o(e,V,l),X||(K=p(N,"input",t[2]),X=!0)},p(e,[t]){1&t&&U!==(U=e[1][parseInt(e[0])-1]+"")&&m(H,U)},i:e,o:e,d(e){e&&l(n),e&&l(r),e&&l(a),e&&l(i),e&&l(g),e&&l(b),e&&l(x),e&&l(y),e&&l(z),e&&l(q),e&&l(A),e&&l(N),e&&l(F),e&&l(S),e&&l(I),e&&l(D),e&&l(J),e&&l(O),e&&l(Q),e&&l(V),X=!1,K()}}}function G(e,t,n){var r=d3.json("/data/data_anomalies.json");d3.json("/data/france.json");const a=["#RCP26","#RCP45","#RCP85"],i=d3.geoConicConformal().center([2.454071,45.279229]).scale(1e3).translate([100,100]);d3.geoPath().projection(i);var s,o,l=d3.scaleQuantize().domain([0,6]).range(["#ffffee","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"]);const c=()=>{a.forEach((e=>{var t,n;t=e,n=o[e],t=t.substring(1,5)+"."+t.substring(5),console.log(t),r.then((e=>{var r=e.filter((e=>e.Contexte===t&&e.Mois==s));console.log(r.length);var a=n.selectAll("rect").data(r);a.enter().append("rect").attr("class","enter").attr("x",(e=>i([e.Longitude,e.Latitude])[0])).attr("y",(e=>i([e.Longitude,e.Latitude])[1]+50)).attr("width",3).attr("height",3).attr("fill",(e=>l(e.Moy))),a.attr("class","update").attr("x",(e=>i([e.Longitude,e.Latitude])[0])).attr("y",(e=>i([e.Longitude,e.Latitude])[1]+50)).attr("width",3).attr("height",3).attr("fill",(e=>l(e.Moy))),n.append("text").attr("class","enter").attr("x",0).attr("y",40).text(t)}))}))};return x((()=>{o=[],n(0,s=12),a.forEach((e=>{let t=d3.select(e).append("svg").attr("id","map").attr("width",200).attr("height",200);o[e]=t})),c()})),[s,["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],function(e){n(0,s=e.target.value),c()}]}class W extends D{constructor(e){super(),I(this,e,G,Z,i,{})}}function Y(t){let n,r,a,i,d,v,g,b,x,y,w,_,C,$,M,T,j,P,L,k,R,E,z,q,A,N,F,S,B,H,I,D,J,O,Q,V,X,K,U=t[0].substring(0,4)+"",Z=t[0].substring(5,9)+"";return{c(){n=c("h1"),r=u("Projection sur les anomalies de températures entre "),a=u(U),i=u(" et "),d=u(Z),v=u(" en France"),g=f(),b=c("div"),x=c("div"),y=c("p"),y.textContent="Selectionnez la période:",w=f(),_=c("select"),C=c("option"),C.textContent="2020-2040",$=c("option"),$.textContent="2040-2060",M=c("option"),M.textContent="2060-2080",T=c("option"),T.textContent="2080-2100",j=f(),P=c("div"),L=f(),k=c("div"),R=f(),E=c("div"),z=f(),q=c("div"),A=f(),N=c("div"),N.innerHTML='<svg width="192" height="24" id="svg" class="svelte-9fkp34"><rect fill="#2c7bb6" width="24" height="24" x="0"></rect><rect fill="#abd9e9" width="24" height="24" x="24"></rect><text font-weight="bold" y="20" x="4">0°C</text><rect fill="#ffffbf" width="24" height="24" x="48"></rect><rect fill="#fdae61" width="24" height="24" x="72"></rect><rect fill="#d7191c" width="24" height="24" x="96"></rect><text font-weight="bold" y="20" x="82" fill="black">+6°C</text></svg>',F=f(),S=c("a"),S.textContent="Precedent",B=f(),H=c("br"),I=f(),D=c("br"),J=f(),O=c("br"),Q=f(),V=c("br"),h(y,"class","svelte-9fkp34"),C.__value="2020_2039",C.value=C.__value,$.__value="2040_2059",$.value=$.__value,M.__value="2060_2079",M.value=M.__value,T.__value="2080_2099",T.value=T.__value,h(_,"name","pets"),h(_,"id","pet-select"),h(x,"class","col-4"),h(b,"id","cont"),h(b,"class","row"),h(P,"id","RCP26"),h(k,"id","RCP45"),h(E,"id","RCP60"),h(q,"id","RCP85"),h(N,"class","footer svelte-9fkp34"),h(S,"href","#France"),h(S,"class","btn btn-primary btn-lg active"),h(S,"role","button"),h(S,"aria-pressed","true")},m(e,l){o(e,n,l),s(n,r),s(n,a),s(n,i),s(n,d),s(n,v),o(e,g,l),o(e,b,l),s(b,x),s(x,y),s(x,w),s(x,_),s(_,C),s(_,$),s(_,M),s(_,T),o(e,j,l),o(e,P,l),o(e,L,l),o(e,k,l),o(e,R,l),o(e,E,l),o(e,z,l),o(e,q,l),o(e,A,l),o(e,N,l),o(e,F,l),o(e,S,l),o(e,B,l),o(e,H,l),o(e,I,l),o(e,D,l),o(e,J,l),o(e,O,l),o(e,Q,l),o(e,V,l),X||(K=p(_,"input",t[1]),X=!0)},p(e,[t]){1&t&&U!==(U=e[0].substring(0,4)+"")&&m(a,U),1&t&&Z!==(Z=e[0].substring(5,9)+"")&&m(d,Z)},i:e,o:e,d(e){e&&l(n),e&&l(g),e&&l(b),e&&l(j),e&&l(P),e&&l(L),e&&l(k),e&&l(R),e&&l(E),e&&l(z),e&&l(q),e&&l(A),e&&l(N),e&&l(F),e&&l(S),e&&l(B),e&&l(H),e&&l(I),e&&l(D),e&&l(J),e&&l(O),e&&l(Q),e&&l(V),X=!1,K()}}}function ee(e,t,n){var r,a=["#RCP26","#RCP45","#RCP60","#RCP85"],i={"#RCP26":"Faible emission de gaz à effet de serre","#RCP45":"Emission moyenne faible de gaz à effet de serre","#RCP60":"Emission moyenne forte de gaz à effet de serre","#RCP85":"Forte emission de gaz à effet de serre"},s=d3.scaleLinear().domain([0,3]).range([18,30]),o=["#d7191c","#fdae61","#ffffbf","#abd9e9","#2c7bb6"].reverse(),l=["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],c=d3.scaleQuantize().domain([0,3]).range(o.slice(1)),d="2020_2039";function u(e,t,n,r,a,o,d=!1){let u=e.slice(24,36);console.log(a);var f=function(e,t,n,r){var a=e,i=t+n,s=r;for(let e=0;e<12;e++)a[e].x=i,a[e].y=s,a[e].mois=l[e],i=i+n+2*t;return a}(u,t,n,r),p=a.selectAll("circle").data(f);p.attr("class","update").attr("r",(function(e){return s(e["Monthly Temperature - (Celsius)"])})).attr("cx",(e=>e.x)).attr("cy",(e=>e.y)).attr("fill",(e=>c(e["Monthly Temperature - (Celsius)"]))).attr("class",(e=>e[" Statistics"])),p.enter().append("circle").attr("class","enter").attr("r",(function(e){return s(e["Monthly Temperature - (Celsius)"])})).attr("cx",(e=>e.x)).attr("cy",(e=>e.y)).attr("fill",(e=>c(e["Monthly Temperature - (Celsius)"]))).attr("class",(e=>e[" Statistics"])).attr("stroke","black"),d&&a.selectAll("text").data(f).enter().append("text").attr("x",(e=>e.x-30)).attr("y",(e=>e.y+30+40)).text((e=>e.mois)),a.append("text").attr("x",0).attr("y",20).text(i[o])}function f(e){a.forEach((e=>{d3.csv("/data/tas_"+d+"_manom_rcp"+e.slice(4,6)+"_FRA.csv").then((t=>{"#RCP85"!=e?u(t,30,40,60,r[e],e):u(t,30,40,60,r[e],e,!0)}))}))}return x((()=>{r=[],a.forEach((e=>{let t=d3.select(e).append("svg").attr("id","map").attr("width",1250).attr("height",140);r[e]=t})),f()})),[d,function(e){n(0,d=e.target.value),f()}]}class te extends D{constructor(e){super(),I(this,e,ee,Y,i,{})}}function ne(t){let n;return{c(){n=c("div"),n.innerHTML='<h1>Introduction</h1> \n\n<p>Nous avons abordé dans ce projet un sujet souvent évoqué mais jamais assez : le réchauffement climatique. L’industrialisation massive des sociétés depuis le début du XXème siècle s’accompagne de rejets de gaz à effet de serre en quantités démesurées.\n    Cet enjeu nécessite une prise de conscience collective, et nous avons pour cela choisi une stratégie de sensibilisation par la visualisation. L’objectif n’est bien évidemment pas de faire le portrait d’un scénario catastrophe comme cela est souvent fait, mais uniquement de retranscrire le plus objectivement possible les données observées et prédites par les experts.</p> \n\n<p>Cette visualisation s’adresse à toute personne sensible à la question environnementale, mais également aux adeptes du climato-scepticisme à l’image du président américain Donald Trump. \n    Nous essayons a travers ce travail de retranscrire à la fois tendance historique de ce fléau, mais aussi les prévisions faites par les experts en fonctions de différents scénarios.</p> \n\n<h1>Bibliothèques utilisées</h1> \n<p>Nous avons utilisé dans ce projet :</p> \n\n<ul><li>Un léger framework nommé svelte</li> \n    <li>Bootstrap pour le style</li> \n    <li>D3js pour les outils de visualisations</li></ul> \n\n<h1>Réalisé par :</h1> \n\n<p>Khelili Adrian : adrian.khelili@etu.univ-lyon1.fr</p> \n<p>Ahmed Saadallah : ahmed.saadallah@etu.univ-lyon1.fr</p> \n<p>Pape Souley : ?</p> \n<p>Amine Zannane : ?</p> \n\n<a href="#Bande" class="btn btn-primary btn-lg active" role="button" aria-pressed="true">Commencer</a>',h(n,"class","center-div svelte-1yz49rq")},m(e,t){o(e,n,t)},p:e,i:e,o:e,d(e){e&&l(n)}}}class re extends D{constructor(e){super(),I(this,e,null,ne,i,{})}}function ae(e){let t,n;return t=new re({}),{c(){F(t.$$.fragment)},m(e,r){S(t,e,r),n=!0},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){N(t.$$.fragment,e),n=!1},d(e){B(t,e)}}}function ie(e){let t,n;return t=new V({}),{c(){F(t.$$.fragment)},m(e,r){S(t,e,r),n=!0},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){N(t.$$.fragment,e),n=!1},d(e){B(t,e)}}}function se(e){let t,n;return t=new U({}),{c(){F(t.$$.fragment)},m(e,r){S(t,e,r),n=!0},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){N(t.$$.fragment,e),n=!1},d(e){B(t,e)}}}function oe(e){let t,n;return t=new W({}),{c(){F(t.$$.fragment)},m(e,r){S(t,e,r),n=!0},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){N(t.$$.fragment,e),n=!1},d(e){B(t,e)}}}function le(e){let t,n;return t=new te({}),{c(){F(t.$$.fragment)},m(e,r){S(t,e,r),n=!0},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){N(t.$$.fragment,e),n=!1},d(e){B(t,e)}}}function ce(e){let t,n,r,a,i,d,p,m,v,g,b,x,y,w,_,C,$,M,T,j,P,L,k,R,E,F,S,B,H,I,D,J,O,Q,V,X,K,U,Z,G,W=e[0]=="#"+e[1].home.href&&ae(),Y=e[0]=="#"+e[1].Bande.href&&ie(),ee=e[0]=="#"+e[1].Metropoles.href&&se(),te=e[0]=="#"+e[1].France.href&&oe(),ne=e[0]=="#"+e[1].Cercles.href&&le();return{c(){t=c("nav"),n=c("div"),r=c("a"),a=u("Home"),d=f(),p=c("button"),p.innerHTML='<span class="navbar-toggler-icon"></span>',m=f(),v=c("div"),g=c("ul"),b=c("li"),x=c("div"),y=c("a"),w=u("Bande"),C=f(),$=c("li"),M=c("div"),T=c("a"),j=u("Metropoles"),L=f(),k=c("li"),R=c("div"),E=c("a"),F=u("France"),B=f(),H=c("li"),I=c("div"),D=c("a"),J=u("Cercles"),Q=f(),W&&W.c(),V=f(),Y&&Y.c(),X=f(),ee&&ee.c(),K=f(),te&&te.c(),U=f(),ne&&ne.c(),Z=u(""),h(r,"href",i="#"+e[1].home.href),h(n,"class","navbar-brand"),h(p,"class","navbar-toggler"),h(p,"type","button"),h(p,"data-toggle","collapse"),h(p,"data-target","#navbarNav"),h(p,"aria-controls","navbarNav"),h(p,"aria-expanded","false"),h(p,"aria-label","Toggle navigation"),h(y,"class","nav-link active"),h(y,"href",_="#"+e[1].Bande.href),h(x,"class","nav-link"),h(b,"class","nav-item active"),h(T,"class","nav-link active"),h(T,"href",P="#"+e[1].Metropoles.href),h(M,"class","nav-link"),h($,"class","nav-item"),h(E,"class","nav-link active"),h(E,"href",S="#"+e[1].France.href),h(R,"class","nav-link"),h(k,"class","nav-item"),h(D,"class","nav-link active"),h(D,"href",O="#"+e[1].Cercles.href),h(I,"class","nav-link"),h(H,"class","nav-item"),h(g,"class","navbar-nav"),h(v,"class","collapse navbar-collapse"),h(v,"id","navbarNav"),h(t,"class","navbar navbar-expand-lg navbar-light bg-light")},m(e,i){o(e,t,i),s(t,n),s(n,r),s(r,a),s(t,d),s(t,p),s(t,m),s(t,v),s(v,g),s(g,b),s(b,x),s(x,y),s(y,w),s(g,C),s(g,$),s($,M),s(M,T),s(T,j),s(g,L),s(g,k),s(k,R),s(R,E),s(E,F),s(g,B),s(g,H),s(H,I),s(I,D),s(D,J),o(e,Q,i),W&&W.m(e,i),o(e,V,i),Y&&Y.m(e,i),o(e,X,i),ee&&ee.m(e,i),o(e,K,i),te&&te.m(e,i),o(e,U,i),ne&&ne.m(e,i),o(e,Z,i),G=!0},p(e,[t]){e[0]=="#"+e[1].home.href?W?1&t&&A(W,1):(W=ae(),W.c(),A(W,1),W.m(V.parentNode,V)):W&&(z(),N(W,1,1,(()=>{W=null})),q()),e[0]=="#"+e[1].Bande.href?Y?1&t&&A(Y,1):(Y=ie(),Y.c(),A(Y,1),Y.m(X.parentNode,X)):Y&&(z(),N(Y,1,1,(()=>{Y=null})),q()),e[0]=="#"+e[1].Metropoles.href?ee?1&t&&A(ee,1):(ee=se(),ee.c(),A(ee,1),ee.m(K.parentNode,K)):ee&&(z(),N(ee,1,1,(()=>{ee=null})),q()),e[0]=="#"+e[1].France.href?te?1&t&&A(te,1):(te=oe(),te.c(),A(te,1),te.m(U.parentNode,U)):te&&(z(),N(te,1,1,(()=>{te=null})),q()),e[0]=="#"+e[1].Cercles.href?ne?1&t&&A(ne,1):(ne=le(),ne.c(),A(ne,1),ne.m(Z.parentNode,Z)):ne&&(z(),N(ne,1,1,(()=>{ne=null})),q())},i(e){G||(A(W),A(Y),A(ee),A(te),A(ne),G=!0)},o(e){N(W),N(Y),N(ee),N(te),N(ne),G=!1},d(e){e&&l(t),e&&l(Q),W&&W.d(e),e&&l(V),Y&&Y.d(e),e&&l(X),ee&&ee.d(e),e&&l(K),te&&te.d(e),e&&l(U),ne&&ne.d(e),e&&l(Z)}}}function de(e,t,n){let r=()=>window.location.hash,a=r();return window.onhashchange=()=>n(0,a=r()),""==r()&&(window.location.href="/#/"),[a,{home:{href:"/"},Bande:{href:"Bande"},Metropoles:{href:"Metropoles"},France:{href:"France"},Cercles:{href:"Cercles"}}]}class ue extends D{constructor(e){super(),I(this,e,de,ce,i,{})}}function fe(t){let n,r,a;return r=new ue({}),{c(){n=c("main"),F(r.$$.fragment),h(n,"class","svelte-1tky8bj")},m(e,t){o(e,n,t),S(r,n,null),a=!0},p:e,i(e){a||(A(r.$$.fragment,e),a=!0)},o(e){N(r.$$.fragment,e),a=!1},d(e){e&&l(n),B(r)}}}function pe(e){window.location.hash.substring(1);return[]}return new class extends D{constructor(e){super(),I(this,e,pe,fe,i,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
